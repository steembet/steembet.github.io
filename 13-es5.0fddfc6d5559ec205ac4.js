!function(){function n(n,e){var i;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(i=function(n,e){if(!n)return;if("string"==typeof n)return t(n,e);var i=Object.prototype.toString.call(n).slice(8,-1);"Object"===i&&n.constructor&&(i=n.constructor.name);if("Map"===i||"Set"===i)return Array.from(n);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(n,e)}(n))||e&&n&&"number"==typeof n.length){i&&(n=i);var o=0,a=function(){};return{s:a,n:function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}},e:function(n){throw n},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,c=!0,l=!1;return{s:function(){i=n[Symbol.iterator]()},n:function(){var n=i.next();return c=n.done,n},e:function(n){l=!0,r=n},f:function(){try{c||null==i.return||i.return()}finally{if(l)throw r}}}}function t(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,i=new Array(t);e<t;e++)i[e]=n[e];return i}function e(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function i(n,t){for(var e=0;e<t.length;e++){var i=t[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"ct+p":function(t,o,a){"use strict";a.r(o),a.d(o,"HomePageModule",(function(){return w}));var r=a("ofXK"),c=a("TEn/"),l=a("3Pt+"),s=a("tyNb"),u=a("lJxs"),b=a("fXoL"),f=a("7JkF"),p=a("/BtF"),g=a("TF2k");function y(n,t){if(1&n){var e=b.Nb();b.Mb(0,"ion-item",12),b.Ub("click",(function(){b.gc(e);var n=t.$implicit;return b.Wb().filterByLeague(n.id)})),b.Mb(1,"ion-label",13),b.kc(2),b.Ib(3,"br"),b.Mb(4,"span",14),b.kc(5),b.Lb(),b.Lb(),b.Lb()}if(2&n){var i=t.$implicit;b.xb(2),b.mc(" ",i.name,""),b.xb(3),b.mc("",i.count," Matche(s)")}}function d(n,t){1&n&&b.Ib(0,"ion-spinner")}function h(n,t){if(1&n){var e=b.Nb();b.Mb(0,"ion-list"),b.Mb(1,"app-item-list-inplay",15),b.Ub("click",(function(){b.gc(e);var n=t.$implicit;return b.Wb().openGame(n,"inplay")})),b.Lb(),b.Lb()}if(2&n){var i=t.$implicit;b.xb(1),b.cc("game",i)}}var m,v,L,I=[{path:"",component:(m=function(){function t(n,i,o){e(this,t),this.socket=n,this.sportsService=i,this.navCtrl=o,this.slideOpts={initialSlide:0,speed:700,autoplay:{delay:5e3},loop:!0},this.currentLeagueId=0}var o,a,r;return o=t,(a=[{key:"ngOnInit",value:function(){var n=this;this.wsInplays=this.getInplays().subscribe((function(t){console.log("websocket",t),n.allInplays=t,0===n.currentLeagueId?n.inplays=n.allInplays.slice(0,25):n.filterByLeague(n.currentLeagueId),n.calculateLiveLeagues()}))}},{key:"ionViewDidEnter",value:function(){var n=this;this.initialInplays=this.sportsService.getInplays().subscribe((function(t){n.allInplays=t,n.inplays=n.allInplays.slice(0,15),n.calculateLiveLeagues()}))}},{key:"calculateLiveLeagues",value:function(){var t=this,e=new Map;this.liveDistictLeagues=[];var i,o=n(this.allInplays);try{var a=function(){var n=i.value;if(e.has(n.LeagueId)){var o=t.liveDistictLeagues.findIndex((function(t){return t.id===n.LeagueId}));t.liveDistictLeagues[o].count+=1}else e.set(n.LeagueId,!0),t.liveDistictLeagues.push({id:n.LeagueId,name:n.RegionName+" - "+n.SportName+" - "+n.LeagueName,count:1})};for(o.s();!(i=o.n()).done;)a()}catch(r){o.e(r)}finally{o.f()}this.liveDistictLeagues.sort((function(n,t){return n.name>t.name?1:-1}))}},{key:"getInplays",value:function(){return this.socket.fromEvent("inplayData").pipe(Object(u.a)((function(n){return n.allInplays})))}},{key:"filterByLeague",value:function(n){var t=this;this.currentLeagueId=n,this.inplays=this.allInplays.filter((function(n){return n.LeagueId===t.currentLeagueId}))}},{key:"ngOnDestroy",value:function(){console.log("home destroyed"),this.initialInplays&&this.initialInplays.unsubscribe(),this.wsInplays&&this.wsInplays.unsubscribe()}},{key:"openGame",value:function(n,t){this.navCtrl.navigateRoot("/game/".concat(t,":").concat(n.SportId,":").concat(n.LeagueId,":").concat(n.Id))}}])&&i(o.prototype,a),r&&i(o,r),t}(),m.\u0275fac=function(n){return new(n||m)(b.Hb(f.a),b.Hb(p.a),b.Hb(c.H))},m.\u0275cmp=b.Bb({type:m,selectors:[["app-home"]],decls:19,vars:5,consts:[[3,"translucent"],["slot","start"],["color","dark"],["slot","start",1,"ion-margin-start","ion-hide-lg-up",2,"--size","25px"],["src","assets/logosmall.png"],[1,"template-border-left","ion-no-padding"],["size-md","3"],[2,"max-height","85vh","overflow-y","scroll"],["style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],["size-md","9",1,"ion-no-padding"],[4,"ngIf"],[4,"ngFor","ngForOf"],[2,"cursor","pointer",3,"click"],[1,"ion-text-wrap",2,"color","#dbdbdb"],[2,"color","#a2a2a2"],[3,"game","click"]],template:function(n,t){1&n&&(b.Mb(0,"ion-header",0),b.Mb(1,"ion-toolbar"),b.Mb(2,"ion-buttons",1),b.Ib(3,"ion-menu-button",2),b.Lb(),b.Mb(4,"ion-thumbnail",3),b.Ib(5,"ion-img",4),b.Lb(),b.Mb(6,"ion-title"),b.kc(7," Home - Live Games "),b.Lb(),b.Lb(),b.Lb(),b.Mb(8,"ion-content",5),b.Mb(9,"ion-grid"),b.Mb(10,"ion-row"),b.Mb(11,"ion-col",6),b.Mb(12,"ion-list",7),b.Mb(13,"ion-list-header"),b.kc(14),b.Lb(),b.jc(15,y,6,2,"ion-item",8),b.Lb(),b.Lb(),b.Mb(16,"ion-col",9),b.jc(17,d,1,0,"ion-spinner",10),b.jc(18,h,2,1,"ion-list",11),b.Lb(),b.Lb(),b.Lb(),b.Lb()),2&n&&(b.cc("translucent",!0),b.xb(14),b.mc("Live Leagues (",null==t.allInplays?null:t.allInplays.length,")"),b.xb(1),b.cc("ngForOf",t.liveDistictLeagues),b.xb(2),b.cc("ngIf",!t.inplays),b.xb(1),b.cc("ngForOf",t.inplays))},directives:[c.k,c.D,c.g,c.s,c.A,c.m,c.B,c.i,c.j,c.v,c.h,c.p,c.q,r.i,r.j,c.n,c.o,c.y,g.a],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),m)}],M=((v=function n(){e(this,n)}).\u0275mod=b.Fb({type:v}),v.\u0275inj=b.Eb({factory:function(n){return new(n||v)},imports:[[s.i.forChild(I)],s.i]}),v),k=a("PCNd"),w=((L=function n(){e(this,n)}).\u0275mod=b.Fb({type:L}),L.\u0275inj=b.Eb({factory:function(n){return new(n||L)},imports:[[r.b,l.a,c.E,M,k.a]]}),L)}}])}();