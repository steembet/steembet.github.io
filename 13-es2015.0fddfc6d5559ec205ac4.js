(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"ct+p":function(t,n,e){"use strict";e.r(n),e.d(n,"HomePageModule",(function(){return y}));var i=e("ofXK"),s=e("TEn/"),o=e("3Pt+"),a=e("tyNb"),l=e("lJxs"),c=e("fXoL"),r=e("7JkF"),b=e("/BtF"),p=e("TF2k");function u(t,n){if(1&t){const t=c.Nb();c.Mb(0,"ion-item",12),c.Ub("click",(function(){c.gc(t);const e=n.$implicit;return c.Wb().filterByLeague(e.id)})),c.Mb(1,"ion-label",13),c.kc(2),c.Ib(3,"br"),c.Mb(4,"span",14),c.kc(5),c.Lb(),c.Lb(),c.Lb()}if(2&t){const t=n.$implicit;c.xb(2),c.mc(" ",t.name,""),c.xb(3),c.mc("",t.count," Matche(s)")}}function g(t,n){1&t&&c.Ib(0,"ion-spinner")}function h(t,n){if(1&t){const t=c.Nb();c.Mb(0,"ion-list"),c.Mb(1,"app-item-list-inplay",15),c.Ub("click",(function(){c.gc(t);const e=n.$implicit;return c.Wb().openGame(e,"inplay")})),c.Lb(),c.Lb()}if(2&t){const t=n.$implicit;c.xb(1),c.cc("game",t)}}const d=[{path:"",component:(()=>{class t{constructor(t,n,e){this.socket=t,this.sportsService=n,this.navCtrl=e,this.slideOpts={initialSlide:0,speed:700,autoplay:{delay:5e3},loop:!0},this.currentLeagueId=0}ngOnInit(){this.wsInplays=this.getInplays().subscribe(t=>{console.log("websocket",t),this.allInplays=t,0===this.currentLeagueId?this.inplays=this.allInplays.slice(0,25):this.filterByLeague(this.currentLeagueId),this.calculateLiveLeagues()})}ionViewDidEnter(){this.initialInplays=this.sportsService.getInplays().subscribe(t=>{this.allInplays=t,this.inplays=this.allInplays.slice(0,15),this.calculateLiveLeagues()})}calculateLiveLeagues(){const t=new Map;this.liveDistictLeagues=[];for(const n of this.allInplays)if(t.has(n.LeagueId)){const t=this.liveDistictLeagues.findIndex(t=>t.id===n.LeagueId);this.liveDistictLeagues[t].count+=1}else t.set(n.LeagueId,!0),this.liveDistictLeagues.push({id:n.LeagueId,name:n.RegionName+" - "+n.SportName+" - "+n.LeagueName,count:1});this.liveDistictLeagues.sort((t,n)=>t.name>n.name?1:-1)}getInplays(){return this.socket.fromEvent("inplayData").pipe(Object(l.a)(t=>t.allInplays))}filterByLeague(t){this.currentLeagueId=t,this.inplays=this.allInplays.filter(t=>t.LeagueId===this.currentLeagueId)}ngOnDestroy(){console.log("home destroyed"),this.initialInplays&&this.initialInplays.unsubscribe(),this.wsInplays&&this.wsInplays.unsubscribe()}openGame(t,n){this.navCtrl.navigateRoot(`/game/${n}:${t.SportId}:${t.LeagueId}:${t.Id}`)}}return t.\u0275fac=function(n){return new(n||t)(c.Hb(r.a),c.Hb(b.a),c.Hb(s.H))},t.\u0275cmp=c.Bb({type:t,selectors:[["app-home"]],decls:19,vars:5,consts:[[3,"translucent"],["slot","start"],["color","dark"],["slot","start",1,"ion-margin-start","ion-hide-lg-up",2,"--size","25px"],["src","assets/logosmall.png"],[1,"template-border-left","ion-no-padding"],["size-md","3"],[2,"max-height","85vh","overflow-y","scroll"],["style","cursor: pointer;",3,"click",4,"ngFor","ngForOf"],["size-md","9",1,"ion-no-padding"],[4,"ngIf"],[4,"ngFor","ngForOf"],[2,"cursor","pointer",3,"click"],[1,"ion-text-wrap",2,"color","#dbdbdb"],[2,"color","#a2a2a2"],[3,"game","click"]],template:function(t,n){1&t&&(c.Mb(0,"ion-header",0),c.Mb(1,"ion-toolbar"),c.Mb(2,"ion-buttons",1),c.Ib(3,"ion-menu-button",2),c.Lb(),c.Mb(4,"ion-thumbnail",3),c.Ib(5,"ion-img",4),c.Lb(),c.Mb(6,"ion-title"),c.kc(7," Home - Live Games "),c.Lb(),c.Lb(),c.Lb(),c.Mb(8,"ion-content",5),c.Mb(9,"ion-grid"),c.Mb(10,"ion-row"),c.Mb(11,"ion-col",6),c.Mb(12,"ion-list",7),c.Mb(13,"ion-list-header"),c.kc(14),c.Lb(),c.jc(15,u,6,2,"ion-item",8),c.Lb(),c.Lb(),c.Mb(16,"ion-col",9),c.jc(17,g,1,0,"ion-spinner",10),c.jc(18,h,2,1,"ion-list",11),c.Lb(),c.Lb(),c.Lb(),c.Lb()),2&t&&(c.cc("translucent",!0),c.xb(14),c.mc("Live Leagues (",null==n.allInplays?null:n.allInplays.length,")"),c.xb(1),c.cc("ngForOf",n.liveDistictLeagues),c.xb(2),c.cc("ngIf",!n.inplays),c.xb(1),c.cc("ngForOf",n.inplays))},directives:[s.k,s.D,s.g,s.s,s.A,s.m,s.B,s.i,s.j,s.v,s.h,s.p,s.q,i.i,i.j,s.n,s.o,s.y,p.a],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),t})()}];let L=(()=>{class t{}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(n){return new(n||t)},imports:[[a.i.forChild(d)],a.i]}),t})();var m=e("PCNd");let y=(()=>{class t{}return t.\u0275mod=c.Fb({type:t}),t.\u0275inj=c.Eb({factory:function(n){return new(n||t)},imports:[[i.b,o.a,s.E,L,m.a]]}),t})()}}]);